---
title: Overview
description: >-
  Learn about rate limit middleware, a middleware that can be used in
  combination with token transfers (ICS-20) to control the amount of in and
  outflows of assets in a certain time period.
---

Learn about rate limit middleware, a middleware that can be used in combination with token transfers (ICS-20) to control the amount of in and outflows of assets in a certain time period.

## What is Rate Limit Middleware?

The rate limit middleware enforces rate limits on IBC token transfers coming into and out of a chain. {/* cosmos/ibc-go modules/apps/rate-limiting/ibc_middleware.go:64 — "Rate limits the incoming packet"; outbound enforced via SendRateLimitedPacket at line 97 */} It supports:

* **Risk Mitigation:** In case of a bug exploit, attack or economic failure of a connected chain, it limits the impact to the in/outflow specified {/* cosmos/ibc-go modules/apps/rate-limiting/types/quota.go:7 — CheckExceedsQuota enforces the threshold cap */} for a given time period. {/* cosmos/ibc-go modules/apps/rate-limiting/keeper/abci.go:8 — BeginBlocker resets limits that have expired based on DurationHours */}
* **Token Filtering:** Through the use of a blacklist, the middleware can completely block tokens entering or leaving a domain, {/* cosmos/ibc-go modules/apps/rate-limiting/keeper/blacklist.go:12 — "Adds a denom to a blacklist to prevent all IBC transfers with that denom" */} relevant for compliance or giving asset issuers greater control over the domains token can be sent to.
* **Uninterrupted Packet Flow:** When desired, rate limits can be bypassed by using the whitelist, to avoid any restriction on asset in or outflows. {/* cosmos/ibc-go modules/apps/rate-limiting/keeper/whitelist.go:12 — "allow all IBC transfers between those addresses to skip all flow calculations" */}

## How it works

The rate limiting middleware determines whether tokens can flow into or out of a chain. The middleware does this by:

1. Check transfer limits for an asset (Quota): When tokens are received or sent, the middleware determines whether the amount of tokens flowing in or out have exceeded the limit. {/* cosmos/ibc-go modules/apps/rate-limiting/keeper/flow.go:18 — CheckRateLimitAndUpdateFlow "checks whether the given packet will exceed the rate limit" */}

2. Track in or outflow: When tokens enter or leave the chain, the amount transferred is tracked in state. {/* cosmos/ibc-go modules/apps/rate-limiting/keeper/flow.go:52 — SetRateLimit persists the updated Inflow/Outflow counters after each packet */}

3. Block or allow token flow: Dependent on the limit, the middleware will either allow the tokens to pass through or block the tokens. {/* cosmos/ibc-go modules/apps/rate-limiting/ibc_middleware.go:66 — ReceiveRateLimitedPacket error returns error ack (blocked); success passes to underlying app at line 72 */}

4. Handle failures: If the packet timesout or fails to be delivered, the middleware ensures limits are correctly recorded. {/* cosmos/ibc-go modules/apps/rate-limiting/ibc_middleware.go:87 — "Revert the outflow amount" on timeout; acknowledgement error path reverts outflow at line 77 */}
